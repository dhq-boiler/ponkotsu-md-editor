<%
  _form = locals[:form]
  _options = {
    lang: locals[:options][:lang] || :en,
    preview: locals[:options][:preview] || true,
    tools: locals[:options][:tools] || %w[bold italic strikethrough heading1 heading2 heading3 heading4 heading5 heading6 unordered_list ordered_list check_list blockquote link image code code_block table horizontal_rule],
    placeholder: locals[:options][:placeholder] || case (locals[:options][:lang] || :en)
    when :en
      <<-EOS
      EOS
    when :ja
      <<-EOS
      Markdownで記事を書いてください...

      例：
      # 見出し1
      ## 見出し2
      ### 見出し3

      **太字** *斜体* ~~打ち消し線~~

      - 箇条書きリスト
      - リストアイテム2

      1. 番号付きリスト
      2. 番号付きアイテム2

      - [ ] 未完了タスク
      - [x] 完了済みタスク

      > 引用ブロック
      > 複数行の引用文

      [リンク](https://example.com)
      ![画像](画像URL)

      `インラインコード`

      ```
      コードブロック
      function example() {
      return 'Hello';
      }
      ```

      | 列1 | 列2 | 列3 |
      |-----|-----|-----|
      | セル1 | セル2 | セル3 |

      ---

      詳しい記法はツールバーのボタンをご活用ください。
      EOS
      else
        "Not supported language"
      end
  }
%>

<div class="markdown-editor">
  <%= render "ponkotsu_md_editor/toolbar", locals: { options: _options } %>
  <%= render "ponkotsu_md_editor/input_area", locals: { form: _form, attribute: locals[:attribute], content: locals[:content], options: _options } %>
</div>
<div class="form-text medium-contrast-text">
  <strong><%= case _options[:lang]
              when :en
                "You can write in Markdown."
              when :ja
                "Markdownで記載できます。"
              else
                "N/A"
              end %></strong>
  <a href="#" id="markdownHelpGuideLink" popovertarget="markdownHelpPopover" class="text-decoration-none" style="color: var(--accent-color);">
    <%= case _options[:lang]
        when :en
          "Writing Guide"
        when :ja
          "書き方ガイド"
        else
          "N/A"
        end %>
  </a> |
  <strong><%= case _options[:lang]
              when :en
                "Keyboard Shortcuts"
              when :ja
                "キーボードショートカット"
              else
                "N/A"
              end %>：</strong>
  <%= case _options[:lang]
      when :en
        "Ctrl+B (Bold), Ctrl+I (Italic), Ctrl+K (Link), Tab (Indent)"
      when :ja
        "Ctrl+B (太字), Ctrl+I (斜体), Ctrl+K (リンク), Tab (インデント)"
      else
        "N/A"
      end %>
</div>
<%= render "ponkotsu_md_editor/markdown_help_modal", locals: { options: _options } %>
<%= javascript_include_tag 'markdown_editor' %>